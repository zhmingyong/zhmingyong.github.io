---
layout:     post
title:      Docker无用镜像清理
subtitle:   node镜像清理
date:       2024-6-26
author:     zhmingyong
header-img: img/post-bg-universe.jpg
catalog: true
tags:
    - Docker
    - 镜像清理
---


# Docker无用镜像清理

熟悉Docker的朋友可能经常遇到"none"镜像的困扰。这些会占据大量的存储空间，而除了复杂地手动处理，许多人并不明白如何有效地清理他们。 如果你正面临这样的挑战，以下的步骤教程会指导你如何在Docker中清理"none"镜像，迅速拿回你的宝贵存储空间。

首先，什么是"none"镜像呢？ 这些实际上是无主的Docker镜像。这意味着在构建新的Docker镜像时，如果使用了原有的镜像并对其做了更改，原有的镜像就会变成无主的"none"镜像。它们虽然被抛弃，但是仍会继续占据磁盘空间。

如同房子里的长期未打扫的角落积攒了大量灰尘，Docker也普遍会堆积大量的"none"镜像，影响其正常运行。而要消除这些"none"镜像，找出它们并清扫它们就显得尤为重要了。

如下是一个标准的指南，如同导向针，明确给你指出去如何清理你的Docker环境，让这些"none"镜像一去不复返。

### **步骤一：查看当前所有镜像**

我们需要先使用如下命令，以获取Docker中所有的镜像：

`docker images`

它会列出所有的Docker镜像，包括那些标签为""的镜像。

### **步骤二：清除“none”镜像**

要清除这些无用的"none"镜像，只需要运行以下命令即可：

```shell
docker rmi $(docker images -f "dangling=true" -q)
```

在这条命令中，`docker images -f "dangling=true" -q` 部分会找出所有没有被任何容器引用(dangling)的镜像，也就是那些标签为""的镜像。 它的结果会作为 `docker rmi`命令的输入，`docker rmi`命令会移除给定列表中的镜像。

### **步骤三：清除所有未使用的镜像**

此外，如果你想清除所有未被使用的镜像，不仅仅是"none"镜像，你可以使用如下命令：

```shell
docker image prune -a
```

上述命令中的 `-a` 表示全部，这会清除掉所有未被任何容器引用的镜像。

上述步骤执行完毕，如同掸去房间的灰尘，你的Docker存储空间应该已经明显得到了释放。

最后一个小贴士，Docker的空间清理没有硬性规则，根据自己的实际需求和情况进行操作即可。在通常情况下，被频繁使用的镜像保留在本地存储会有助于你的套装工作效率，所以并不是所有的镜像都需要清理。清理应当针对那些不再需要的或是"none"镜像进行。

以上就是如何在Docker中清理"none"镜像的方法。希望这篇文章可以帮助你释放Docker的存储空间，让Docker在保持焕然一新的同时，也能够带给你高效的生产力。